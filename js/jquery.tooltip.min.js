/*
 * @license 
 * jQuery Tools 1.2.5.x Tooltip - UI essentials
 * 
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 * 
 * http://flowplayer.org/tools/tooltip/
 *
 * Since: November 2008
 * Date:    Wed Sep 22 06:02:10 2010 +0000 
 */
(function(D){D.tools=D.tools||{version:"1.2.5.x"};D.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,position:["top","center"],offset:[0,0],relative:false,cancelDefault:true,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(E,G,F){C[E]=[G,F]}};var C={toggle:[function(E){var F=this.getConf(),G=this.getTip(),H=F.opacity;if(H<1){G.css({opacity:H})}G.show();E.call()},function(E){this.getTip().hide();E.call()}],fade:[function(E){var F=this.getConf();this.getTip().fadeTo(F.fadeInSpeed,F.opacity,E)},function(E){this.getTip().fadeOut(this.getConf().fadeOutSpeed,E)}]};function B(G,I,F){var K=F.relative?G.position().top:G.offset().top,J=F.relative?G.position().left:G.offset().left,L=F.position[0];K-=I.outerHeight()-F.offset[0];J+=G.outerWidth()+F.offset[1];var E=I.outerHeight()+G.outerHeight();if(L=="center"){K+=E/2}if(L=="bottom"){K+=E}L=F.position[1];var H=I.outerWidth()+G.outerWidth();if(L=="center"){J-=H/2}if(L=="left"){J-=H}return{top:K,left:J}}function A(H,J){var R=this,G=H.add(R),O,F=0,Q=0,M=H.attr("title"),I=H.attr("data-tooltip"),S=C[J.effect],N,L=H.is(":input"),E=L&&H.is(":checkbox, :radio, select, :button, :submit"),K=H.attr("type"),P=J.events[K]||J.events[L?(E?"widget":"input"):"def"];if(!S){throw'Nonexistent effect "'+J.effect+'"'}P=P.split(/,\s*/);if(P.length!=2){throw"Tooltip: bad events configuration for "+K}H.bind(P[0],function(T){clearTimeout(F);if(J.predelay){Q=setTimeout(function(){R.show(T)},J.predelay)}else{R.show(T)}}).bind(P[1],function(T){clearTimeout(Q);if(J.delay){F=setTimeout(function(){R.hide(T)},J.delay)}else{R.hide(T)}});if(M&&J.cancelDefault){H.removeAttr("title");H.data("title",M)}D.extend(R,{show:function(U){if(!O){if(I){O=D(I)}else{if(J.tip){O=D(J.tip).eq(0)}else{if(M){O=D(J.layout).addClass(J.tipClass).appendTo(document.body).hide().append(M)}else{O=H.next();if(!O.length){O=H.parent().next()}}}}if(!O.length){throw"Cannot find tooltip for "+H}}if(R.isShown()){return R}O.stop(true,true);var V=B(H,O,J);if(J.tip){O.html(H.data("title"))}U=U||D.Event();U.type="onBeforeShow";G.trigger(U,[V]);if(U.isDefaultPrevented()){return R}V=B(H,O,J);O.css({position:"absolute",top:V.top,left:V.left});N=true;S[0].call(R,function(){U.type="onShow";N="full";G.trigger(U)});var T=J.events.tooltip.split(/,\s*/);if(!O.data("__set")){O.bind(T[0],function(){clearTimeout(F);clearTimeout(Q)});if(T[1]&&!H.is("input:not(:checkbox, :radio), textarea")){O.bind(T[1],function(W){if(W.relatedTarget!=H[0]){H.trigger(P[1].split(" ")[0])}})}O.data("__set",true)}return R},hide:function(T){if(!O||!R.isShown()){return R}T=T||D.Event();T.type="onBeforeHide";G.trigger(T);if(T.isDefaultPrevented()){return }N=false;C[J.effect][1].call(R,function(){T.type="onHide";G.trigger(T)});return R},isShown:function(T){return T?N=="full":N},getConf:function(){return J},getTip:function(){return O},getTrigger:function(){return H}});D.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(U,T){if(D.isFunction(J[T])){D(R).bind(T,J[T])}R[T]=function(V){if(V){D(R).bind(T,V)}return R}})}D.fn.tooltip=function(E){var F=this.data("tooltip");if(F){return F}E=D.extend(true,{},D.tools.tooltip.conf,E);if(typeof E.position=="string"){E.position=E.position.split(/,?\s/)}this.each(function(){F=new A(D(this),E);D(this).data("tooltip",F)});return E.api?F:this}})(jQuery);